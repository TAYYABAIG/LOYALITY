<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loyalty & Referral Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Google Fonts - Nunito Sans -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600;700;800&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="./assets/css/style.css">
    <link rel="stylesheet" href="./assets/css/responsive.css">

</head>

<body>
    <!-- Added sidebar overlay for mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-logo">
            <img src="./assets/images/megaphone.png" alt="" class="logo">
            <span>Loyalty</span> & Referral
        </div>

        <ul class="sidebar-menu" id="mainMenu">
            <li>
                <a href="index.html" data-menu="dashboard">
                    <i class="bi bi-speedometer2"></i>
                    <span>Dashboard</span>
                </a>
                <div class="menu-tooltip">Dashboard</div>
            </li>
            <li>
                <a href="productCode.html" data-menu="products-code">
                    <i class="bi bi-grid"></i>
                    <span>Products Code</span>
                </a>
                <div class="menu-tooltip">Products Code</div>
            </li>
            <li>
                <a href="importCode.html" data-menu="import-code">
                    <i class="bi bi-heart"></i>
                    <span>Import Code</span>
                </a>
                <div class="menu-tooltip">Import Code</div>
            </li>
            <li>
                <a href="#" data-menu="redeemable-gifts">
                    <i class="bi bi-gift"></i>
                    <span>Redeemable Gifts</span>
                </a>
                <div class="menu-tooltip">Redeemable Gifts</div>
            </li>
            <li>
                <a href="#" data-menu="discounted-websites">
                    <i class="bi bi-list-ul"></i>
                    <span>Discounted Websites</span>
                </a>
                <div class="menu-tooltip">Discounted Websites</div>
            </li>
            <li>
                <a href="#" data-menu="product-stock">
                    <i class="bi bi-file-text"></i>
                    <span>Product Stock</span>
                </a>
                <div class="menu-tooltip">Product Stock</div>
            </li>
        </ul>

        <div class="menu-section">PAGES</div>

        <ul class="sidebar-menu" id="pagesMenu">
            <li>
                <a href="#" data-menu="api-clients">
                    <i class="bi bi-building"></i>
                    <span>API Clients</span>
                </a>
                <div class="menu-tooltip">API Clients</div>
            </li>
            <li>
                <a href="#" data-menu="users">
                    <i class="bi bi-people"></i>
                    <span>Users</span>
                </a>
                <div class="menu-tooltip">Users</div>
            </li>
            <li>
                <a href="#" data-menu="roles">
                    <i class="bi bi-clipboard-check"></i>
                    <span>Roles</span>
                </a>
                <div class="menu-tooltip">Roles</div>
            </li>
        </ul>

        <div class="sidebar-bottom">
            <ul class="sidebar-menu" id="bottomMenu">
                <li>
                    <a href="#" data-menu="settings" class="active">
                        <i class="bi bi-gear"></i>
                        <span>Settings</span>
                    </a>
                    <div class="menu-tooltip">Settings</div>
                </li>
                <li id="side-logout">
                    <a href="#" data-menu="logout">
                        <i class="bi bi-box-arrow-left"></i>
                        <span>Logout</span>
                    </a>
                    <div class="menu-tooltip">Logout</div>
                </li>
            </ul>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <!-- Top Header -->
        <header class="top-header">
            <div class="header-left">
                <i class="bi bi-list hamburger" id="hamburger"></i>
                <div class="search-box">
                    <i class="bi bi-search"></i>
                    <input type="text" placeholder="Search">
                </div>
            </div>
            <div class="header-right">
                <div class="notification">
                    <i class="bi bi-bell"></i>
                    <span class="notification-badge">6</span>
                </div>

                <!-- Language dropdown with menu -->
                <!-- <div class="language-dropdown" id="languageDropdown">
                    <div class="language" onclick="toggleLanguageDropdown()">
                        <img src="https://flagcdn.com/w40/gb.png" alt="UK Flag" id="currentFlag">
                        <span id="currentLang">English</span>
                        <i class="bi bi-chevron-down"></i>
                    </div>
                    <div class="language-menu">
                        <a href="#" onclick="selectLanguage('gb', 'English')">
                            <img src="https://flagcdn.com/w40/gb.png" alt="UK Flag">
                            English
                        </a>
                        <a href="#" onclick="selectLanguage('es', 'Spanish')">
                            <img src="https://flagcdn.com/w40/es.png" alt="Spanish Flag">
                            Spanish
                        </a>
                        <a href="#" onclick="selectLanguage('fr', 'French')">
                            <img src="https://flagcdn.com/w40/fr.png" alt="French Flag">
                            French
                        </a>
                        <a href="#" onclick="selectLanguage('de', 'German')">
                            <img src="https://flagcdn.com/w40/de.png" alt="German Flag">
                            German
                        </a>
                        <a href="#" onclick="selectLanguage('cn', 'Chinese')">
                            <img src="https://flagcdn.com/w40/cn.png" alt="Chinese Flag">
                            Chinese
                        </a>
                    </div>
                </div> -->

                <!-- Profile dropdown with menu -->
                <div class="profile-dropdown" id="profileDropdown">
                    <div class="user-profile" onclick="toggleProfileDropdown()">
                        <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop&crop=face"
                            alt="User" class="user-avatar">
                        <div class="user-info">
                            <h6>Moni Roy</h6>
                            <span>Admin</span>
                        </div>
                        <span class="drop-arrow">
                            <i class="bi bi-chevron-down "></i>
                        </span>
                    </div>
                    <div class="profile-menu">
                        <div class="profile-menu-header">
                            <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop&crop=face"
                                alt="User">
                            <div>
                                <h6>Moni Roy</h6>
                                <span>moni.roy@email.com</span>
                            </div>
                        </div>
                        <a href="#">
                            <i class="bi bi-person"></i>
                            My Profile
                        </a>
                        <a href="#">
                            <i class="bi bi-gear"></i>
                            Account Settings
                        </a>
                        <a href="#">
                            <i class="bi bi-question-circle"></i>
                            Help Center
                        </a>
                        <a href="#" class="logout">
                            <i class="bi bi-box-arrow-left"></i>
                            Logout
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="main-content-wrapper flex-grow-1">
            <div class="container-fluid">

                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h1 class="page-title mb-0">Create Product Codes</h1>

                    <div class="action-buttons h-75">
                        <a class="ui-btn ui-btn-dark text-decoration-none " href="productCode.html">
                            <svg class="me-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20"
                                height="20" color="#ffffff" fill="none" stroke="#ffffff" stroke-width="1.5"
                                stroke-linecap="round" stroke-linejoin="round">
                                <path
                                    d="M11.5 8.45596V9L17.5 9C18.4319 9 18.8978 9 19.2654 9.15224C19.7554 9.35523 20.1448 9.74458 20.3478 10.2346C20.5 10.6022 20.5 11.0681 20.5 12C20.5 12.9319 20.5 13.3978 20.3478 13.7654C20.1448 14.2554 19.7554 14.6448 19.2654 14.8478C18.8978 15 18.4319 15 17.5 15H11.5V15.544C11.5 17.6268 11.5 18.6681 10.8997 18.9422C10.2994 19.2163 9.58174 18.5026 8.14642 17.0751L4.58281 13.5311C3.86094 12.8132 3.5 12.4542 3.5 12C3.5 11.5458 3.86094 11.1868 4.58281 10.4689L8.14643 6.92487C9.58175 5.49743 10.2994 4.78372 10.8997 5.05779C11.5 5.33185 11.5 6.37322 11.5 8.45596Z" />
                            </svg>
                            Back
                        </a>
                    </div>
                </div>

                <div class="bg-white data-container p-4 row">

                    <ul class="nav nav-tabs custom-tabs" id="settingsTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#general"
                                type="button">General</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#product-code"
                                type="button">Product Code</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#referral"
                                type="button">Referral</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#redemption"
                                type="button">Redemption</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#smtp"
                                type="button">SMTP</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#bonus"
                                type="button">Bonus</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#cities"
                                type="button">Cities</button>
                        </li>
                    </ul>

                    <div class="tab-content py-4 mt-3 ">
                        <div class="tab-pane fade " id="general">
                            <!-- <div class="rounded shadow-sm px-3 py-2 mb-4" > -->
                            <!-- <h1 class="section-title mb-3">General</h1> -->
                            <!-- </div> -->

                            <form action="" class="row">

                                <div class="mb-3 col-md-6">
                                    <label for="code" class="form-label fw-semibold">Website Name <span
                                            class="text-danger">*</span></label>
                                    <div class="input-group">
                                        <span class="input-group-text">üåê</span>
                                        <input type="text" class="form-control" id="code"
                                            placeholder="Enter Website Name" required>
                                    </div>
                                </div>
                                <div class="mb-3 col-md-6">
                                    <label for="code" class="form-label fw-semibold">Logo <span
                                            class="text-danger">*</span></label>
                                    <div class="input-group mb-3">
                                        <input type="file" class="form-control" id="inputGroupFile02">
                                        <label class="input-group-text" for="inputGroupFile02">Upload</label>
                                    </div>
                                </div>

                                <div class="mb-4 col-md-6">
                                    <label for="code" class="form-label fw-semibold">Enable Email Notifications</label>
                                    <!-- From Uiverse.io by JaydipPrajapati1910 -->
                                    <div class="toggle-button-cover">
                                        <div id="button-3" class="button r">
                                            <input class="checkbox" type="checkbox">
                                            <div class="knobs"></div>
                                            <div class="layer"></div>
                                        </div>
                                    </div>
                                    <div id="emailHelp" class="form-text text-danger">Before enabling, make sure you
                                        have added valid SMTP configurations in the SMTP tab.</div>
                                </div>

                            </form>

                            <button class="ui-btn ui-btn-primary">
                                <svg class="me-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20"
                                    height="20" fill="none" stroke="currentColor" stroke-width="1.5"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M12 5v14M5 12h14" />
                                </svg>
                                Save Changes
                            </button>
                        </div>
                        <div class="tab-pane fade" id="product-code">Product Code content...</div>
                        <div class="tab-pane fade" id="referral">
                            <!-- <h1 class="section-title">Referral</h1> -->

                            <div>
                                <div class="col-12">
                                    <div class="instruction-card referral-card">
                                        <h6 class="instruction-title">
                                            <i class="bi bi-people"></i> Referral System Instructions
                                        </h6>

                                        <ul>
                                            <li>
                                                <b>Enable Referral System:</b> Set to <b>Enabled</b> to activate
                                                referrals.
                                                When set to <b>Disabled</b>, users may still enter referral codes,
                                                but no bonuses will be awarded.
                                            </li>

                                            <li>
                                                <b>Referral Bonus Points:</b> Must be greater than <b>0</b>.
                                                Values <b>0 or below</b> disable bonus distribution.
                                            </li>

                                            <li>
                                                <b>Max Referral Bonus Levels:</b> Defines how many levels receive
                                                rewards.
                                                Must be at least <b>1</b>. Setting it to <b>0</b> disables multi-level
                                                rewards.
                                            </li>

                                            <li>
                                                <b>Referral Bonus Decay Percent:</b> Controls how much the bonus reduces
                                                per level.
                                                Must be greater than <b>0</b>. If set to <b>0</b>, only level-1 receives
                                                a bonus.
                                            </li>
                                        </ul>

                                        <p class="referral-note">
                                            All values must be valid. Zero or invalid values will prevent the referral
                                            system from functioning.
                                        </p>
                                    </div>
                                </div>

                                <form class="col-12 mt-4">
                                    <button class="ui-btn ui-btn-primary">
                                        <svg class="me-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                            width="20" height="20" fill="none" stroke="currentColor" stroke-width="1.5"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M12 5v14M5 12h14" />
                                        </svg>
                                        Save Changes
                                    </button>
                                </form>
                            </div>

                        </div>
                        <div class="tab-pane fade" id="redemption">Redemption content...</div>
                        <div class="tab-pane fade" id="smtp">SMTP content...</div>
                        <div class="tab-pane fade show active" id="bonus">

                            <div class="container " id="bonusRulesPanel">

                                <div class="d-flex justify-content-between mb-3">
                                    <div>
                                        <h4 class="fw-semibold mb-2">Bonus Rules</h4>
                                        <p class="text-muted ">Manage how users earn and redeem points.</p>
                                    </div>


                                </div>

                                <!-- Rules Container -->
                                <div id="rulesContainer"></div>
                                <!-- Add Rule -->
                                <div class="d-flex gap-2 justify-content-between">

                                    <button id="addRuleBtn" class="ui-btn ui-btn-secondary ">
                                        + Add New Rule
                                    </button>

                                    <button id="saveRulesBtn" class="ui-btn ui-btn-primary px-4">Save All</button>

                                </div>
                            </div>


                            <script>
                                const initialRules = [
                                    { title: "Earn Points on Referrals", description: "You will earn bonus points when someone registers using your referral code." },
                                    { title: "Referral Bonus Reduces by Level", description: "Each level in the referral chain receives a reduced percentage of the base referral bonus." },
                                    { title: "Redeem Points for Rewards", description: "You can redeem your earned points once you reach the minimum threshold." },
                                    { title: "Earn Points by Scanning Product Codes", description: "Scan valid product codes to receive bonus points added to your account." },
                                    { title: "Lifetime Points Tracking", description: "Points are tracked for lifetime achievements even after spending." }
                                ];

                                const rulesContainer = document.getElementById("rulesContainer");

                                function renderRules() {
                                    rulesContainer.innerHTML = "";
                                    initialRules.forEach((rule, index) => {
                                        rulesContainer.appendChild(createRuleCard(rule, index));
                                    });
                                }

                                function createRuleCard(rule, index) {
                                    const wrapper = document.createElement("div");
                                    wrapper.className = "rule-card";

                                    wrapper.innerHTML = `
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <span class="rule-index "> #${index + 1}</span>
                                         <div class="rule-remove">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" color="#d0021b" fill="none" stroke="#d0021b" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
    <path d="M12 2.00012C17.5228 2.00012 22 6.47727 22 12.0001C22 17.523 17.5228 22.0001 12 22.0001C6.47715 22.0001 2 17.523 2 12.0001M8.909 2.48699C7.9 2.8146 6.96135 3.29828 6.12153 3.90953M3.90943 6.12162C3.29806 6.9616 2.81432 7.90044 2.4867 8.90964" />
    <path d="M14.9994 15.0001L9 9.00012M9.00064 15.0001L15 9.00012" />
</svg>
                                                                </div>
                                        </div>
                                    <div class="d-flex justify-content-between align-items-start">
                                        <div class="d-flex align-items-center w-100">
                                        <div class="mb-3 w-100">
                                    <label for="code" class="form-label fw-semibold">Rule Title</label>
                                    <div class="input-group">
                                        <span class="input-group-text">
                                    <img src="./assets/images/compliant.png" alt="" width="24" height="24" >
                                            </span>
                                        <input type="text" class="form-control" id="code" value="${rule.title}"
                                            placeholder="Rule Title" required>
                                    </div>
                                </div>
                                        </div>
                                       
                                    </div>

                                      <div class="mb-3 w-100">
                                    <label for="code" class="form-label fw-semibold mb-0">Explain</label>
                                    <div class="mb-3">
                                        <textarea class="form-control form-control-sm mt-2" rows="2"
                                            placeholder="Description">${rule.description}</textarea>
                                    </div>
                                </div>
                                    `;

                                    // Remove rule
                                    wrapper.querySelector(".rule-remove").onclick = () => {
                                        initialRules.splice(index, 1);
                                        renderRules();
                                    };

                                    return wrapper;
                                }

                                // Add Rule
                                document.getElementById("addRuleBtn").onclick = () => {
                                    initialRules.push({ title: "", description: "" });
                                    renderRules();
                                };

                                // Save All
                                document.getElementById("saveRulesBtn").onclick = () => {
                                    const data = [];

                                    [...rulesContainer.children].forEach((card, i) => {
                                        const title = card.querySelector("input").value.trim();
                                        const description = card.querySelector("textarea").value.trim();

                                        if (!title) {
                                            alert(`Rule #${i + 1} must have a title`);
                                            return;
                                        }

                                        data.push({ order: i + 1, title, description });
                                    });

                                    console.log("Saved Rules:", data);
                                    alert("Rules saved (check console)");
                                };

                                renderRules();
                            </script>


                        </div>
                        <div class="tab-pane fade" id="cities">Cities content...</div>
                    </div>


                </div>
            </div>
        </main>
    </main>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./assets/js/index.js"></script>
</body>

</html>