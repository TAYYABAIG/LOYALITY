<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loyalty & Referral Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Google Fonts - Nunito Sans -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600;700;800&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
        integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="./assets/css/style.css">
    <link rel="stylesheet" href="./assets/css/responsive.css">

</head>

<body>
    <!-- Added sidebar overlay for mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-top">

            <div class="sidebar-logo">
                <!-- <img src="./assets/images/megaphone.png" alt="Logo" class="logo-img"> -->
                <span>Loyalty</span> & Referral
            </div>

            <ul class="sidebar-menu" id="mainMenu">
                <li>
                    <a href="index.html" data-menu="dashboard">
                        <i class="bi bi-speedometer2"></i>
                        <span>Dashboard</span>
                    </a>
                    <div class="menu-tooltip">Dashboard</div>
                </li>
                <li>
                    <a href="user-point-rules.html" data-menu="products-code">
                        <i class="bi bi-grid"></i>
                        <span>Points Rules</span>
                    </a>
                    <div class="menu-tooltip">Points Rule</div>
                </li>
                <li>
                    <a href="user-redeem-points.html" class="active" data-menu="products-code">
                        <i class="bi bi-grid"></i>
                        <span>Redeem Points</span>
                    </a>
                    <div class="menu-tooltip">Redeem Points</div>
                </li>
                <li>
                    <a href="productCode.html" data-menu="products-code">
                        <i class="bi bi-grid"></i>
                        <span>Products Code</span>
                    </a>
                    <div class="menu-tooltip">Products Code</div>
                </li>
                <li>
                    <a href="importCode.html" data-menu="import-code">
                        <i class="bi bi-heart"></i>
                        <span>Import Code</span>
                    </a>
                    <div class="menu-tooltip">Import Code</div>
                </li>
                <li>
                    <a href="#" data-menu="redeemable-gifts">
                        <i class="bi bi-gift"></i>
                        <span>Redeemable Gifts</span>
                    </a>
                    <div class="menu-tooltip">Redeemable Gifts</div>
                </li>
                <li>
                    <a href="#" data-menu="discounted-websites">
                        <i class="bi bi-list-ul"></i>
                        <span>Discounted Websites</span>
                    </a>
                    <div class="menu-tooltip">Discounted Websites</div>
                </li>
                <li>
                    <a href="#" data-menu="product-stock">
                        <i class="bi bi-file-text"></i>
                        <span>Product Stock</span>
                    </a>
                    <div class="menu-tooltip">Product Stock</div>
                </li>
            </ul>

            <div class="menu-section">PAGES</div>

            <ul class="sidebar-menu" id="pagesMenu">
                <li>
                    <a href="#" data-menu="api-clients">
                        <i class="bi bi-building"></i>
                        <span>API Clients</span>
                    </a>
                    <div class="menu-tooltip">API Clients</div>
                </li>
                <li>
                    <a href="#" data-menu="users">
                        <i class="bi bi-people"></i>
                        <span>Users</span>
                    </a>
                    <div class="menu-tooltip">Users</div>
                </li>
                <li>
                    <a href="#" data-menu="roles">
                        <i class="bi bi-clipboard-check"></i>
                        <span>Roles</span>
                    </a>
                    <div class="menu-tooltip">Roles</div>
                </li>
            </ul>
        </div>

        <div class="sidebar-bottom">
            <ul class="sidebar-menu" id="bottomMenu">
                <li>
                    <a href="#" data-menu="settings">
                        <i class="bi bi-gear"></i>
                        <span>Settings</span>
                    </a>
                    <div class="menu-tooltip">Settings</div>
                </li>
                <li id="side-logout">
                    <a href="#" data-menu="logout">
                        <i class="bi bi-box-arrow-left"></i>
                        <span>Logout</span>
                    </a>
                    <div class="menu-tooltip">Logout</div>
                </li>
            </ul>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <!-- Top Header -->
        <!-- START: Working header with notification & profile dropdowns -->
        <header class="top-header">
            <div class="header-left">
                <i class="bi bi-list hamburger" id="hamburger" aria-label="Toggle sidebar" role="button"
                    tabindex="0"></i>
                <div class="search-box" role="search" aria-label="Search">
                    <i class="bi bi-search" aria-hidden="true"></i>
                    <input type="text" placeholder="Search" aria-label="Search input">
                </div>
            </div>
            <!-- Right Image/Cards -->
            <div class="header-right">
                <button class="redeem-btn" id="redeemBtn" aria-label="Redeem points">REDEEM POINTS</button>

                <div class="points-box" title="Points balance">
                    <div class="points" id="pointsValue">323 Points</div>
                    <div class="equals">=</div>
                    <div class="points" id="cashValue">PKR 80.75Rs</div>
                </div>

                <!-- Notification (dropdown) -->
                <div class="dropdown notif-dropdown">
                    <button class="btn position-relative notif-btn" type="button" id="notifBtn"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-bell fs-4"></i>
                        <span class="notif-badge">6</span>
                    </button>

                    <div class="dropdown-menu dropdown-menu-end notif-menu" aria-labelledby="notifBtn">

                        <div class="notif-item">
                            <div class="notif-avatar">LR</div>
                            <div class="notif-content">
                                <div class="notif-title">Code added successfully</div>
                                <div class="notif-line">
                                    <span class="notif-label">Code</span>
                                    <span class="notif-code">ZVSJPRME</span>
                                    <span class="notif-text-muted">added successfully</span>
                                </div>
                                <div class="notif-time">2 days ago</div>
                            </div>
                        </div>

                        <div class="notif-item">
                            <div class="notif-avatar">LR</div>
                            <div class="notif-content">
                                <div class="notif-title">Code added successfully</div>
                                <div class="notif-line">
                                    <span class="notif-label">Code</span>
                                    <span class="notif-code">FULQXG4M</span>
                                    <span class="notif-text-muted">added successfully</span>
                                </div>
                                <div class="notif-time">2 days ago</div>
                            </div>
                        </div>

                        <div class="notif-item">
                            <div class="notif-avatar">LR</div>
                            <div class="notif-content">
                                <div class="notif-title">Code added successfully</div>
                                <div class="notif-line">
                                    <span class="notif-label">Code</span>
                                    <span class="notif-code">ASKRB8S1</span>
                                    <span class="notif-text-muted">added successfully</span>
                                </div>
                                <div class="notif-time">2 days ago</div>
                            </div>
                        </div>

                        <div class="notif-footer">
                            <a href="#" class="notif-view-all text-decoration-none">View All</a>
                        </div>

                    </div>
                </div>


                <!-- Profile (dropdown) -->
                <div class="profile-dropdown" id="profileWrapper" style="position:relative;">
                    <button id="userProfileBtn" class="user-profile" aria-haspopup="true" aria-expanded="false"
                        aria-controls="profileMenu">
                        <div class="profile-user-avatar">
                            MR
                        </div>
                        <div class="user-info">
                            <h6>Moni Roy</h6>
                            <span>Admin</span>
                        </div>
                        <i class="bi bi-chevron-down"></i>
                    </button>

                    <div id="profileMenu" class="dropdown-menu-custom" role="menu" aria-labelledby="userProfileBtn"
                        hidden>
                        <div class="profile-menu-header">
                            <div class="profile-user-avatar">
                                MR
                            </div>
                            <div>
                                <h6>Moni Roy</h6>
                                <span>moni.roy@email.com</span>
                            </div>
                        </div>

                        <a href="#" role="menuitem" class="dropdown-item"> My Profile</a>
                        <a href="#" role="menuitem" class="dropdown-item">Account Settings</a>
                        <a href="#" role="menuitem" class="dropdown-item">Help Center</a>
                        <a href="#" role="menuitem" class="dropdown-item logout">Logout</a>
                    </div>
                </div>
            </div>
        </header>


        <!-- Main Content Area -->
        <main class="main-content-wrapper container-fluid flex-grow-1 px-4">

            <div class="ntf3-root d-flex justify-content-center bg-transparent">
                <div class="ntf3-card" role="region" aria-label="Notifications">
                    <div class="ntf3-card-header" >
                        <!-- header -->
                        <div class="ntf3-header d-flex align-items-start justify-content-between">
                            <div>
                                <h2 class="ntf3-title">Notification</h2>
                                <div class="ntf3-sub">Stay Update With Your Latest Notifications</div>
                            </div>

                            <div class="ntf3-header-controls d-flex align-items-start gap-2">
                                <!-- small action icons -->
                                <button class="ntf3-icon-btn" title="Export">
                                    <!-- simple export svg -->
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <path d="M12 3v12" stroke-width="1.6" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                        <path d="M5 10l7-7 7 7" stroke-width="1.6" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                        <path d="M21 21H3" stroke-width="1.6" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                    </svg>
                                </button>

                                <button class="ntf3-icon-btn" title="Clear all">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"
                                        color="#d0021b" fill="none" stroke="#d0021b" stroke-width="1.5"
                                        stroke-linecap="round">
                                        <path
                                            d="M19.5 5.5L18.8803 15.5251C18.7219 18.0864 18.6428 19.3671 18.0008 20.2879C17.6833 20.7431 17.2747 21.1273 16.8007 21.416C15.8421 22 14.559 22 11.9927 22C9.42312 22 8.1383 22 7.17905 21.4149C6.7048 21.1257 6.296 20.7408 5.97868 20.2848C5.33688 19.3626 5.25945 18.0801 5.10461 15.5152L4.5 5.5" />
                                        <path
                                            d="M3 5.5H21M16.0557 5.5L15.3731 4.09173C14.9196 3.15626 14.6928 2.68852 14.3017 2.39681C14.215 2.3321 14.1231 2.27454 14.027 2.2247C13.5939 2 13.0741 2 12.0345 2C10.9688 2 10.436 2 9.99568 2.23412C9.8981 2.28601 9.80498 2.3459 9.71729 2.41317C9.32164 2.7167 9.10063 3.20155 8.65861 4.17126L8.05292 5.5" />
                                        <path d="M9.5 16.5L9.5 10.5" />
                                        <path d="M14.5 16.5L14.5 10.5" />
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <!-- tabs / controls -->
                        <div class="ntf3-tabs d-flex align-items-center justify-content-between mt-3">
                            <ul class="ntf3-tablist nav" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active ntf3-tab" data-target="all" type="button">All <span
                                            class="ntf3-tab-badge">6</span></button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link ntf3-tab" data-target="payments"
                                        type="button">Payments</button>
                                </li>
                            </ul>

                            <button class="ntf3-markall" id="ntf3-markAll"><span class="ntf3-check">✓</span> Mark all as
                                read</button>
                        </div>
                    </div>

                    <!-- list container -->
                    <div class="ntf3-list" id="ntf3-list">

                        <!-- Today heading -->
                        <div class="ntf3-section">
                            <div class="ntf3-section-title">Today</div>

                            <!-- item -->
                            <article class="ntf3-item ntf3-unread" data-id="1" data-type="all">
                                <div class="ntf3-left">
                                    <img class="ntf3-avatar" src="https://i.pravatar.cc/48?img=12" alt="avatar">
                                    <span class="ntf3-status-dot bg-success"></span>
                                </div>

                                <div class="ntf3-content">
                                    <div class="ntf3-row">
                                        <div class="ntf3-heading">Courtney booked a haircut with Barber Mike for</div>
                                        <div class="ntf3-meta">2:00 PM</div>
                                    </div>
                                    <div class="ntf3-subline">
                                        <small class="text-muted">New Bookings • Feb 12, 2025</small>
                                    </div>
                                </div>

                                <div class="ntf3-actions">
                                    <button class="ntf3-small-btn" data-action="view">View</button>
                                    <button class="ntf3-small-btn ntf3-small-btn-danger" data-action="mark">Mark
                                        read</button>
                                </div>
                            </article>

                            <!-- item -->
                            <article class="ntf3-item" data-id="2" data-type="all payments">
                                <div class="ntf3-left">
                                    <img class="ntf3-avatar" src="https://i.pravatar.cc/48?img=6" alt="avatar">
                                    <span class="ntf3-status-dot bg-warning"></span>
                                </div>

                                <div class="ntf3-content">
                                    <div class="ntf3-row">
                                        <div class="ntf3-heading">Smith booked a haircut with Barber...</div>
                                        <div class="ntf3-meta">1:45 PM</div>
                                    </div>
                                    <div class="ntf3-subline">
                                        <small class="text-muted">Rescheduled • Mar 14, 2025</small>
                                    </div>
                                </div>

                                <div class="ntf3-actions">
                                    <button class="ntf3-small-btn" data-action="view">View</button>
                                    <button class="ntf3-small-btn" data-action="mark">Mark read</button>
                                </div>
                            </article>

                            <!-- item -->
                            <article class="ntf3-item ntf3-unread" data-id="3" data-type="all">
                                <div class="ntf3-left">
                                    <img class="ntf3-avatar" src="https://i.pravatar.cc/48?img=8" alt="avatar">
                                    <span class="ntf3-status-dot bg-success"></span>
                                </div>

                                <div class="ntf3-content">
                                    <div class="ntf3-row">
                                        <div class="ntf3-heading">John Doe new barber a haircut with Barber
                                            registrations</div>
                                        <div class="ntf3-meta">10:00 AM</div>
                                    </div>
                                    <div class="ntf3-subline">
                                        <small class="text-muted">New barber registrations • Feb 12, 2025</small>
                                    </div>
                                </div>

                                <div class="ntf3-actions">
                                    <button class="ntf3-small-btn" data-action="view">View</button>
                                    <button class="ntf3-small-btn" data-action="mark">Mark read</button>
                                </div>
                            </article>

                        </div> <!-- /Today -->

                        <!-- Yesterday heading -->
                        <div class="ntf3-section">
                            <div class="ntf3-section-title">Yesterdays</div>

                            <article class="ntf3-item" data-id="4" data-type="all payments">
                                <div class="ntf3-left">
                                    <img class="ntf3-avatar" src="https://i.pravatar.cc/48?img=3" alt="avatar">
                                    <span class="ntf3-status-dot bg-success"></span>
                                </div>

                                <div class="ntf3-content">
                                    <div class="ntf3-row">
                                        <div class="ntf3-heading">Sarah Johnson booked a Beard Trim with Barber Alex for
                                        </div>
                                        <div class="ntf3-meta">9:00 AM</div>
                                    </div>
                                    <div class="ntf3-subline">
                                        <small class="text-muted">New Bookings • Feb 12, 2025</small>
                                    </div>
                                </div>

                                <div class="ntf3-actions">
                                    <button class="ntf3-small-btn" data-action="view">View</button>
                                    <button class="ntf3-small-btn" data-action="mark">Mark read</button>
                                </div>
                            </article>

                            <article class="ntf3-item" data-id="5" data-type="all">
                                <div class="ntf3-left">
                                    <img class="ntf3-avatar" src="https://i.pravatar.cc/48?img=5" alt="avatar">
                                    <span class="ntf3-status-dot bg-success"></span>
                                </div>

                                <div class="ntf3-content">
                                    <div class="ntf3-row">
                                        <div class="ntf3-heading">David Miller scheduled a Fade Cut with Barber Chris
                                            for</div>
                                        <div class="ntf3-meta">10:00 AM</div>
                                    </div>
                                    <div class="ntf3-subline">
                                        <small class="text-muted">New Bookings • Feb 12, 2025</small>
                                    </div>
                                </div>

                                <div class="ntf3-actions">
                                    <button class="ntf3-small-btn" data-action="view">View</button>
                                    <button class="ntf3-small-btn" data-action="mark">Mark read</button>
                                </div>
                            </article>

                        </div> <!-- /Yesterday -->
                    </div> <!-- /list -->
                </div>
            </div>



            <script>
                /* Minimal JS for tabs and mark-all / per-item mark-read */
                (function () {
                    const tabs = document.querySelectorAll('.ntf3-tab');
                    const markAllBtn = document.getElementById('ntf3-markAll');
                    const list = document.getElementById('ntf3-list');

                    // tab switching (filter by data-target)
                    tabs.forEach(t => t.addEventListener('click', () => {
                        tabs.forEach(x => x.classList.remove('active'));
                        t.classList.add('active');
                        const target = t.getAttribute('data-target'); // e.g. 'all' or 'payments'
                        // show/hide items based on data-type attribute
                        const items = list.querySelectorAll('.ntf3-item');
                        items.forEach(it => {
                            if (target === 'all') { it.style.display = ''; return; }
                            const types = it.getAttribute('data-type') || '';
                            it.style.display = types.split(' ').includes(target) ? '' : 'none';
                        });
                    }));

                    // mark individual item read
                    list.addEventListener('click', (e) => {
                        const btn = e.target.closest('[data-action="mark"]');
                        if (!btn) return;
                        const article = btn.closest('.ntf3-item');
                        if (!article) return;
                        article.classList.remove('ntf3-unread');
                    });

                    // mark all read
                    if (markAllBtn) {
                        markAllBtn.addEventListener('click', () => {
                            document.querySelectorAll('.ntf3-item.ntf3-unread').forEach(a => a.classList.remove('ntf3-unread'));
                            // show a small confirmation (temporary)
                            markAllBtn.textContent = 'All marked';
                            setTimeout(() => markAllBtn.textContent = 'Mark all as read', 1500);
                        });
                    }
                })();
            </script>

        </main>

    </main>

    <script>
        (function () {
            const btn = document.getElementById('userProfileBtn');
            const menu = document.getElementById('profileMenu');

            if (!btn || !menu) {
                console.warn('Profile dropdown: required elements not found (userProfileBtn, profileMenu).');
                return;
            }

            // Utility: open / close functions
            function openMenu() {
                menu.hidden = false;
                btn.setAttribute('aria-expanded', 'true');
                menu.classList.add('open'); // optional hook for animation/CSS
                // Move focus to first focusable item inside menu (optional)
                const first = menu.querySelector('a, button, [tabindex]:not([tabindex="-1"])');
                if (first) first.focus();
            }

            function closeMenu() {
                menu.hidden = true;
                btn.setAttribute('aria-expanded', 'false');
                menu.classList.remove('open');
                btn.focus();
            }

            function toggleMenu() {
                if (menu.hidden) openMenu();
                else closeMenu();
            }

            // Toggle on button click
            btn.addEventListener('click', function (e) {
                e.stopPropagation();
                toggleMenu();
            });

            // Keyboard support for the button: Enter or Space opens/toggles
            btn.addEventListener('keydown', function (e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    toggleMenu();
                } else if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    if (menu.hidden) openMenu();
                    const first = menu.querySelector('a, button, [tabindex]:not([tabindex="-1"])');
                    if (first) first.focus();
                }
            });

            // Close on outside click
            document.addEventListener('click', function (e) {
                if (!menu.hidden && !menu.contains(e.target) && !btn.contains(e.target)) {
                    closeMenu();
                }
            });

            // Close on Escape
            document.addEventListener('keydown', function (e) {
                if (e.key === 'Escape' && !menu.hidden) {
                    closeMenu();
                }
            });

            // Optional: close menu when any menu item clicked (useful for single-page apps)
            menu.addEventListener('click', function (e) {
                const target = e.target;
                if (target.matches('a[role="menuitem"], button, [data-close-on-click]')) {
                    closeMenu();
                }
            });

            // Make sure menu is hidden by default if JS is enabled (prevents flash)
            menu.hidden = true;
            btn.setAttribute('aria-expanded', 'false');
        })();
    </script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./assets/js/index.js"></script>


</body>

</html>